project: quail_test
profile: dev
default_covey: daily

envs:
  dev:
    # Use Quail's native ORM (SQL). Defaults to a local sqlite file.
    orm:
      kind: sql
      url: 
      schema: raw_data
      reflect: ["pricing_report","featurestore"]                      # reflect after seeding
    resources: { max_workers: 4 }

params:
  report_date: 2025-09-07
  min_listing_count: 10

targets:
  # Smoke run: create table + seed a few rows + ensure connectivity
  smoke:
    - reflect_tables
    - test_connection
    - qc_connection_ok

project: pricing_report_qc
profile: dev
default_covey: daily

envs:
  dev:
    orm:
      kind: sql
      url: redshift+psycopg2://awsuser:Pg68h2ZHmVjml@redshift-cluster-2.clxqnyeopl7d.us-east-1.redshift.amazonaws.com:5439/db_quibble               
      schema: raw_data               # leave empty if your DB has no schema
      reflect: ["pricing_report"]    # table must already exist
    resources: { max_workers: 8 }

params:
  report_date: 2025-09-07
  min_listing_count: 10

targets:
  smoke: [reflect_tables, test_connection, qc_connection_ok]
  daily: [reflect_tables, test_connection, load_pricing_report, summarize, qc_reports_nonempty, qc_summary_clean]
