project: quail_test_covey
profile: dev
default_covey: daily

envs:
  dev:
    # Use Quail's native ORM (SQL). Defaults to a local sqlite file.
    orm:
      kind: sql
      url: redshift+psycopg2://awsuser:Pg68h2ZHmVjml@redshift-cluster-2.clxqnyeopl7d.us-east-1.redshift.amazonaws.com:5439/db_quibble
      schema: raw_data
      reflect: ["pricing_report"]                      # reflect after seeding
    resources: { max_workers: 4 }

params:
  report_date: 2025-09-07
  min_listing_count: 10

targets:
  # Smoke run: create table + seed a few rows + ensure connectivity
  smoke:
    - reflect_tables
    - test_connection
    - qc_connection_ok

  # # Daily: run the full flow & checks
  # daily:
  #   - ensure_table
  #   - seed_sample_rows
  #   - reflect_tables
  #   - test_connection
  #   - load_pricing_report
  #   - summarize
  #   - qc_reports_nonempty
  #   - qc_summary_clean
